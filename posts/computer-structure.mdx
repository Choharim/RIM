---
title: 컴퓨터의 구조
description: 하드웨어의 구성과 각 역할을 알아보자.
createDate: 2022.12.14
tag: 운영체제
---

## 하드웨어 구성

> 필수 장치

### CPU (중앙처리 장치) 🧑🏻‍🍳

- **산술 논리 연산 장치**
  +, -, \*, / 와 같은 산술과 AND,OR 같은 논리 연산을 수행한다.
- **제어 장치**
  명령어를 해석하여 제어 신호를 보내고 CPU내 데이터 흐름을 조절하는 역할을 한다.
- **레지스터**
  CPU가 연산을 하기 위해 필요한 데이터를 가져와 임시로 보관하는 곳이다.
  메모리에서 필요한 데이터를 가져와 레지스터에 저장한다 → 산술 논리 연산 장치로 연산한다 → 결과값을 레지스터에 저장한다 → 메모리로 옮긴다 - 사용자 가시 레지스터 - 사용자 프로그램에 의해 변경된다 - 데이터 레지스터
  메모리에서 가져온 데이터를 임시로 보관한다. - 주소 레지스터
  메모리 주소가 저장된다. - 특수 레지스터, 사용자 불가시 레지스터 - 사용자가 임의로 변경할 수 없다 - 메모리 버퍼 레지스터
  메모리 관리자가 메모리에서 가져온 데이터나 메모리로 옮겨 갈 데이터를 임시로 저장한다. - 메모리 주소 레지스터
  메모리 관리자가 접근해야 할 메모리의 주소를 저장한다. - 명령어 레지스터
  현재 실행 중인 명령어를 저장한다. - 프로그램 카운터
  다음에 실행할 명령어의 주소를 가리킨다. - 프로그램 상태 레지스터
  연산 결과(양수, 음수, 0 등)을 저장한다.

<aside>
❓ 클록(clock)

- CPU에서의 클록
  CPU안의 모든 구성 장치는 일정한 박자에 맞추어 작업을 한다. 이러한 박자를 클록 틱(tick, pulse, clock tick)이라고 하고, 이의 주기를 클록이라 한다. 클록 수를 높인다는 것은 클록 틱의 발생 주기를 짧게 하여 클록 틱 더 많이 발생시킨다는 것이다. 즉, 연산이 빨라진다는 것이다.
- 메인보드에서의 클록
  메인 보드에 있는 클록은 틱을 보낼 때마다 데이터를 보내거나 받는다.

</aside>

<aside>
❓ 헤르츠
클록 틱이 1초에 몇 번 발생했는지 나타내는 단위이다. 1000Hz는 1초에 1000번의 틱이 발생한다는 것이다.

- CPU가 3.4GHz의 성능을 갖는다는 것은, 1초에 약 34억 번의 연산 작업을 할 수 있다는 것이다.
- 메인 보드가 1.3GHz의 성능을 갖는다는 것은, 버스로 1초에 약 13억 번의 데이터를 이동할 수 있다는 것이다.

</aside>

### 메인 메모리 🫓

작업에 필요한 프로그램과 데이터를 저장하는 장소이다. byte 단위로 분할되어 있고, 분할 공간마다 주소로 구분한다. 데이터를 읽거나 쓸 때는 워드 단위로 움직인다.
비휘발성 메모리는 전력이 끊겨도 데이터를 보관해야 하므로 속도가 느리고 가격이 비싸며 내부가 복잡하다. 그래서 아직도 메인 메모리는 휘발성 메모리를 사용한다.

> 주변 장치

### 저장 장치 🧺

메모리보다 느리지만, 저렴하고 용량이 크고 비휘발성 메모리이다. 하드디스크, USB, SD카드, SSD, CD 등이 있다.

### 입출력 장치

입력 장치는 외부의 데이터를 컴퓨터에 입력할 수 있는 장치이다. 키보드, 마우스, 스캐너, 터치 스크린 등이 있다.

출력 장치는 컴퓨터에서 처리한 결과를 출력하는 장치이다. 프린터, 모니터, 스피커 등이 있다.

## 메모리

### 종류

- 램 (RAM - random access memory)
  데이터의 저장 위치와 상관없이 무작위로 접근해도 한 번에 접근 가능하여 같은 속도로 데이터를 읽을 수 있기 때문에 RAM이라는 이름이 붙었다. 전력이 끊기면 저장된 데이터가 휘발되는 휘발성 메모리이다. 읽거나 쓸 수 있다. - DRAM, SRAM
- 롬 (ROM - read only memory)
  읽기 전용 메모리이다. 전력이 끊겨도 데이터를 보관할 수 있는 비휘발성 메모리이다. - 하드 디스크, 플래시 메모리 (SSD…)

### 메모리 보호

CPU는 한 번에 하나의 프로세스만 작업할 수 있기 때문에 사용자의 프로세스가 CPU를 차지하는 동안 운영체제의 작업도 잠시 중단된다. 운영체제가 중단되었을 때도 사용자의 작업으로부터 메모리를 보호하기 위해 CPU는 다음과 같은 작업을 한다.

작업 전에 현재 작업 중인 메모리의 시작 주소를 `경계 레지스터`에 저장한다. 그리고 현재 진행 중인 작업이 차지하는 메모리의 크기를 `한계 레지스터`에 저장한다. 작업이 진행되는 동안 해당 작업이 두 레지스터의 주소 범위 내에서 이루어 지는지 확인한다.
만약, 범위를 벗어난다면 인터럽트 관리 프로세스가 실행되어 해당 프로그램을 강제 종료 시키고 운영체제를 깨워 `인터럽트`를 처리하도록 한다.

## 하드 웨어 연결- 폰노이만 구조

CPU, 메인 메모리, 입출력 장치, 저장 장치 등 각 장치가 메인 보드에서 ‘버스’라는 통로로 연결되어 있는 구조이다. 오늘날의 컴퓨터는 대부분 폰노이만 구조를 따른다. 이 구조에서 가장 중요한 특징은 `모든 프로그램은 메모리에 올라와야 실행할 수 있다` 는 것이다.

<Picture src="computer-structure.png" />

### 시스템 버스

시스템 버스는 CPU의 제어 장치와 메모리 주소 레지스터, 메모리 버퍼 레지스터를 메모리, 주변 장치와 연결하기 위한 통로이다.

메모리는 시스템 버스로 데이터를 이동시키기 때문에 시스템 버스와 메모리는 둘 중 낮은 속도에 성능이 의존한다.

- 제어 버스
  CPU의 제어 장치에서 제어 신호를 메모리와 주변 장치에 보내고, 메모리의 오류나 주변 장치의 도착 신호를 CPU에 보내는 통로이다.
- 주소 버스
  CPU의 메모리 주소 레지스터에서 주소 정보를 메모리나 주변 장치로 전달하는 통로이다.
- 데이터 버스
  CPU의 메모리 버퍼 레지스터와 메모리, 주변장치 사이에서 데이터를 주고 받는 통로이다.

### CPU 내부 버스

CPU 내부 버스는 CPU 내부에 있는 장치를 연결하는 버스이다. 시스템 버스보다 속도가 훨씬 빠르다.

<aside>
❓ 버스 대역폭과 워드
버스의 대역폭은 한 번에 전달할 수 있는 데이터의 최대 크기이다. CPU가 한 번에 처리할 수 있는 데이터의 크기와 같다. 버스의 대역폭, 레지스터의 크기, 메모리에 한 번에 저장할 수 있는 데이터의 크기는 항상 같다. 한 번에 처리할 수 있는 데이터의 최대 크기를 `워드`라고 한다.

</aside>

### 부팅

모든 프로그램은 메모리에 올라와야 실행할 수 있다. 운영체제를 메모리에 올리는 과정을 부팅이라고 한다. 응용 프로그램은 운영체제가 메모리에 올려 실행하지만, 운영체제는 어떻게 부팅되는지 살펴보자.

1. 컴퓨터 전원이 켜진다.
2. ROM에 저장된 바이오스가 실행된다.
3. 바이오스는 하드웨어가 정상 작동하는지 점검한다.
4. 이상이 없으면, 하드디스크의 마스터 부트 레코드에 저장된 프로그램인 부트스트랩 코드를 메모리로 가져와 실행한다.
5. 하드 디스크에 저장된 운영체제가 메모리에 올라온다.
