---
title: CPU 스케줄링
description: 프로세스 상태를 관리하는 CPU 스케줄러가 어떤 기준으로 프로세스에게 CPU를 할당하는지 알아보자.
createDate: 2022.12.21
tag: 운영체제
---

## CPU 스케줄링의 규모

> 고수준 스케줄링

가장 큰 범주에서 이루어지는 스케줄링이다. 시스템의 상황을 고려하여 프로세스를 승인할지 거부할지 결정하여 시스템 내 전체 프로세스 수를 조절한다. 승인 스케줄링이라고도 한다.

> 중간 수준 스케줄링

저수준 스케줄링이 원만하게 이루어지기 위해, 과부화를 막기 위해 필요한 스케줄링이다.

고수준 스케줄링에서 승인된 프로세스를 대상으로 보류 상태를 이용하여 활성화된 프로세스 수를 조절한다.

> 저수준 스케줄링

프로세스를 어떤 상태로 이동시킬지 조정하는 일이다.

## CPU 할당을 위한 고려사항

CPU 스케줄러는 프로세스의 생성~종료까지의 모든 상태 변화를 조정하고, 프로세스의 중요도를 고려하여 CPU를 고루 배분한다. 우선순위가 높은 프로세스가 더 빨리 자주 실행된다. 프로세스의 중요도/우선순위를 따져보자.

### 선점형 스케줄링

운영체제가 실행중인 프로세스의 CPU를 강제로 뺏앗을 수 있는 스케줄링 방식이다. 실행 중 프로세스의 작업을 중단시키고 새로운 작업을 시작할 수 있다. 문맥 교환과 같은 부가적인 작업을 위한 시간이 든다.

시분할 시스템에서 인터럽트가 발생하면 CPU는 실행중인 프로세스를 중단하고 커널을 깨워 인터럽트 처리를 시키는 것과 같다.

### 비선점형 스케줄링

실행중인 프로세스의 CPU를 강제로 빼앗을 수 없는 스케줄링 방식이다. 기다리는 프로세스가 많아 전체 시스템의 처리율이 떨어진다.

일괄 작업 시스템과 같다.

### 커널 프로세스 vs 일반 프로세스 (커널 프로세스 > 일반 프로세스)

커널 프로세스가 일반 프로세스보다 우선순위가 더 높고, 각 커널 프로세스와 일반 프로세스 내에서도 우선순위가 나누어 진다.

일반 프로세스의 경우 사용자가 우선순위를 조절할 수 있다. 단, 관리자만 우선순위를 높일 수 있고 일반 계정은 낮추는 것만 가능하다.

### CPU 집중 프로세스 vs 입출력 집중 프로세스 (입출력 집중 프로세스 > CPU 집중 프로세스)

CPU 집중 프로세스는 CPU를 할당 받아 실행하는 작업인 CPU 버스트가 많은 프로세스이고, 입출력 집중 프로세스는 입출력 작업인 입출력 버스트가 많은 프로세스이다.

<aside>
💡 **CPU 집중 프로세스보다 입출력 집중 프로세스의 우선순위를 높이면 시스템 효율이 향상된다.**   
입출력 집중 프로세스가 먼저 실행되면 대기 상태로 이동하기 때문에 다른 프로세스가 실행 상태로 이동할 수 있다. 다시말해, 입출력 관리자에 의해 입출력 작업이 진행되는 동안 다른 프로세스가 실행될 수 있다. 하지만 CPU 집중 프로세스가 먼저 실행될 경우, 할당된 실행 시간인 타임 슬라이스를 다 사용할 때까지 다른 프로세스는 실행되지 못한다. 
입출력 프로세스가 CPU 집중 프로세스보다 먼저 실행되는 것을 `사이클 훔치기` 라고 한다.

</aside>

### 전면 프로세스 vs 후면 프로세스 (전면 프로세스 > 후면 프로세스)

전면 프로세스는 GUI를 사용하는 운영체제에서 화면의 맨 앞에 놓인 프로세스를 말한다. 사용자와 상호작용이 가능하여 상호작용 프로세스라고도 한다.

후면 프로세스는 사용자와 상호작용이 없는 프로세스이다.

## 스케줄링 알고리즘 - 다단계 피드백 큐

커널 프로세스가 사용자 프로세스보다 우선순위가 높고, 커널과 사용자 프로세스 별로 우선순위가 나뉘어져 있다. 우선순위 별로 Queue가 존재하여 다단계 큐라고 한다.

프로세스 상태에서 준비 큐와 대기 큐도 다단계 큐이다.

> 프로세스가 실행되어 CPU를 할당받을 때마다 프로세스의 우선순위가 낮아진다.

프로세스의 우선순위가 고정이고 우선순위가 높은순 대로 처리를 한다면 우선순위가 낮은 프로세스의 작업은 무한 연기될 수 있다. 때문에 변동 우선 순위 방식을 사용한다.

프로세스가 실행되고 타임 슬라이스 동안 작업이 끝나지 않아 타임 아웃이 되었다면 다시 준비 큐로 이동하는데, 이때 이전보다 낮은 우선순위 큐로 이동한다. 단, 커널 프로세스가 일반 프로세스의 큐에 삽입되지 않는다.

> 우선순위가 낮을 수록 타임 슬라이스가 크다.

우선순위가 낮을 수록 CPU를 할당받을 기회가 적으니, 실행 단계에서 한 번 CPU를 할당받을 수 있는 작업 시간인 타임 슬라이스를 크게 준다.

우선순위가 가장 낮은 프로세스는 무한대의 타임 슬라이스를 얻기 때문에 CPU를 할당받으면 작업이 완료될 때까지 CPU를 독점할 수 있는 비선점 스케줄링을 하게 된다.
